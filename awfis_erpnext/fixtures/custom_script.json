[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Lead", 
  "modified": "2016-04-13 21:55:18.064170", 
  "name": "Lead-Client", 
  "script": "frappe.ui.form.on(\"Lead\", \"validate\", function(frm){\n  if (!isMobileNoValid(frm.doc.mobile_no)) {\n    flashMessage();\n validated = false;\n  }\n});\n\nfunction isMobileNoValid(mobno) {\n   var rx = new RegExp(\"^[789]\\\\d{9}$\"); \n   var isvalid = rx.test(mobno);\n   return isvalid;\n}\n\nfunction flashMessage() {\n       msgprint(__(\"Entered Mobile No. is either incomplete or invalid. <br /> Tip: Add it without the +0 or +91 at the beginning.\", \"Invalid Mobile No\"));\n}\n\nfrappe.ui.form.on(\"Lead\", \"source\", function(frm){\n    if (frm.doc.source === \"IPC\" || frm.doc.source === \"Broker\" ){\n        frm.set_value(\"type\", \"Channel Partner\");\n    }\n    else{\n        frm.set_value(\"type\", \"\");\n    }\n});\n\nfrappe.ui.form.on(\"Lead\", \"onload\", function(frm) {\n    frm.set_query(\"channel_partner\", function() {\n    \treturn {\n\t\t\t\"filters\": {\n                \"partner_type\": frm.doc.source\n            }\n        };\n    });\n});\n\n//Set FirstName and LastName\nfrappe.ui.form.on(\"Lead\", \"first_name\", function(frm){\n    frm.set_value(\"lead_name\", buildName(frm.doc.first_name, frm.doc.last_name));\n});\n\nfrappe.ui.form.on(\"Lead\", \"last_name\", function(frm){\n    frm.set_value(\"lead_name\", buildName(frm.doc.first_name, frm.doc.last_name));\n});\n\n//Lead Name cannot be hidden via Customize Form. Hide using script.\nfrappe.ui.form.on(\"Lead\", \"refresh\", function(frm) {\n    frm.toggle_display(\"lead_name\", false);\n    frm.toggle_display(\"lead_name\", false);\n});\n\n//Set value of Mobile No when Awfis Mobile No is entered.\nfrappe.ui.form.on(\"Lead\", \"awfis_mobile_no\", function(frm) {\n    frm.set_value(\"mobile_no\", frm.doc.awfis_mobile_no);\n});\n\n//Set value of Mobile No when Awfis Mobile No is entered.\nfrappe.ui.form.on(\"Lead\", \"awfis_company_website\", function(frm) {\n    frm.set_value(\"website\", frm.doc.awfis_company_website);\n});\n\n//Set value of Mobile No when Awfis Mobile No is entered.\nfrappe.ui.form.on(\"Lead\", \"awfis_email_id\", function(frm) {\n    frm.set_value(\"email_id\", frm.doc.awfis_email_id);\n});\n\n//Set value of Territory when Awfis Lead Territory is set.\nfrappe.ui.form.on(\"Lead\", \"awfis_lead_territory\", function(frm) {\n    frm.set_value(\"territory\", frm.doc.awfis_lead_territory);\n});\n\n//Helpers\nfunction buildName(fname, lname) {\n\tif (!lname) {\n\t\treturn fname;\n\t} else if (!fname) {\n\t\treturn lname;\n\t} else {\n\t\treturn fname + ' ' + lname;\n\t}\n}\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2016-04-11 10:34:45.331653", 
  "name": "Sales Order-Client", 
  "script": "frappe.ui.form.on(\"Sales Order\", \"territory\", function(frm){\n     frm.set_query(\"centre\", function() {\n\t        return {\n\t            \"filters\": {\n\t                \"city\": frm.doc.territory\n\t            }\n\t        };\n\t    });\n});\n\nfrappe.ui.form.on(\"Sales Order\", \"refresh\", function(frm){\n\tfrm.set_query(\"territory\", function() {\n    \treturn {\n\t\t\t\"filters\": {\n                \"parent_territory\": \"India\"\n            }\n        };\n \t});\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Contact", 
  "modified": "2016-04-11 13:11:34.248650", 
  "name": "Contact-Client", 
  "script": "var is_mobno_valid = false;\n\nfrappe.ui.form.on(\"Contact\", \"mobile_no\", function(frm){\n\tvar mobno = frm.doc.mobile_no;\n\tvar rx = new RegExp(\"^[789]\\\\d{9}$\"); \n\tvar isvalid = rx.test(mobno);\n\n\tif (isvalid == true) {\n          is_mobno_valid = true;\n\t} else {\n          is_mobno_valid = false;\n\t  msgprint(\"Entered Mobile No. is either incomplete or invalid. <br /> Tip: Add it without the +0 or +91 at the beginning.\", \"Invalid Mobile No\");\n\t}\n});\n\nfrappe.ui.form.on(\"Contact\", \"validate\", function(frm) {\n   if (!is_mobno_valid) {\n       msgprint(\"Entered Mobile No. is either incomplete or invalid. <br /> Tip: Add it without the +0 or +91 at the beginning.\", \"Invalid Mobile No\");\n      validated = false;\n   }\n\n});\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Opportunity", 
  "modified": "2016-04-13 19:05:40.413283", 
  "name": "Opportunity-Client", 
  "script": "frappe.ui.form.on(\"Opportunity\", \"city\", function(frm){\n     frm.set_query(\"centre\", function() {\n\t        return {\n\t            \"filters\": {\n\t                \"city\": frm.doc.city\n\t            }\n\t        };\n\t    });\n});\n\nfrappe.ui.form.on(\"Opportunity\", \"refresh\", function(frm){\n\tfrm.set_query(\"city\", function() {\n    \treturn {\n\t\t\t\"filters\": {\n                \"is_group\": 0\n            }\n        };\n \t});\n});\n\n\n\nfrappe.ui.form.on(\"Opportunity\", \"awfis_opportunity_channel\", function(frm){\n \tfrm.set_value(\"source\", frm.doc.awfis_opportunity_channel);\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2016-04-13 21:09:34.469728", 
  "name": "Customer-Client", 
  "script": "frappe.ui.form.on(\"Customer\", \"company_website\", function(frm){\n \tfrm.set_value(\"website\", frm.doc.company_website);\n});\n", 
  "script_type": "Client"
 }
]